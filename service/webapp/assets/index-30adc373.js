import{r as B,g as J,o as z,a as D,b as F,c as G,d as y,e as i,f as o,h as a,w as c,i as l,E as L,j as f,u as t,t as d,k as n,F as A,l as S,m as U,n as $,p as q,q as R,s as H,_ as K}from"./index-0b31d82e.js";import{s as O}from"./request-cb14a1a7.js";const Q=()=>O({url:"info",method:"get"}),W={class:"app-container"},X={class:"el-table el-table--enable-row-hover el-table--medium"},Y={cellspacing:"0",style:{width:"100%"}},Z={class:"el-table__cell is-leaf"},ll={key:0,class:"cell"},el={class:"el-table__cell is-leaf"},sl={key:0,class:"cell"},tl={class:"el-table__cell is-leaf"},al={key:0,class:"cell"},il={class:"el-table__cell is-leaf"},ol={key:0,class:"cell"},dl={class:"el-table el-table--enable-row-hover el-table--medium"},cl={cellspacing:"0",style:{width:"100%"}},nl={class:"el-table__cell is-leaf"},_l={key:0,class:"cell"},rl={class:"el-table__cell is-leaf"},ul={key:0,class:"cell"},ml={class:"el-table__cell is-leaf"},bl={key:0,class:"cell"},fl={class:"el-table__cell is-leaf"},pl={key:0,class:"cell"},vl={class:"el-table el-table--enable-row-hover el-table--medium"},yl={cellspacing:"0",style:{width:"100%"}},hl={class:"el-table__cell is-leaf"},gl={key:0,class:"cell"},wl={class:"el-table__cell is-leaf"},kl={key:0,class:"cell"},xl={class:"el-table__cell is-leaf"},Nl={key:0,class:"cell"},Cl={class:"el-table__cell is-leaf"},Tl={key:0,class:"cell"},Il={class:"el-table__cell is-leaf",colspan:"3"},El={key:0,class:"cell"},Pl={class:"el-table el-table--enable-row-hover el-table--medium"},Ml={cellspacing:"0",style:{width:"100%","table-layout":"fixed"}},Vl={class:"el-table__cell is-leaf"},jl={key:0,class:"cell"},Bl={class:"el-table__cell is-leaf"},Jl={key:0,class:"cell"},zl={class:"el-table__cell is-leaf"},Dl={key:0,class:"cell"},Fl={class:"el-table__cell is-leaf"},Gl={key:0,class:"cell"},Ll={class:"el-table__cell is-leaf"},Al={key:0,class:"cell"},Sl={class:"el-table__cell is-leaf"},Ul={key:0,class:"cell"},$l={class:"el-table el-table--enable-row-hover el-table--medium"},ql={cellspacing:"0",style:{width:"100%"}},Rl={key:0},Hl={class:"el-table__cell is-leaf"},Kl={class:"cell"},Ol={class:"el-table__cell is-leaf"},Ql={class:"cell"},Wl={class:"el-table__cell is-leaf"},Xl={class:"cell"},Yl={class:"el-table__cell is-leaf"},Zl={class:"cell"},le={class:"el-table__cell is-leaf"},ee={class:"cell"},se={class:"el-table__cell is-leaf"},te={class:"cell"},ae={class:"el-table__cell is-leaf"},ie={class:"cell"},ne={__name:"index",setup(oe){let h;const s=B([]),{proxy:g}=J();function w(_){_&&g.$modal.loading("正在加载服务监控数据，请稍候！"),Q().then(e=>{console.log(e),s.value=e.data}).finally(()=>g.$modal.closeLoading())}function r(_){return!_||isNaN(_)||Number.isInteger(_)?_:parseFloat(parseFloat(_).toFixed(2))}z(()=>x()),D(()=>x()),F(()=>k()),G(()=>k());function k(){console.log("clearTimer..."),clearInterval(h),h=null}function x(){let _=localStorage.getItem("refreshTime")||10;console.log("startTimer..."),clearInterval(h),h=setInterval(()=>{w()},parseInt(_)*1e3)}return w(!0),(_,e)=>{const C=y("Cpu"),p=U,m=$,b=q,T=y("Tickets"),I=y("Monitor"),E=y("CoffeeCup"),N=y("MessageBox"),v=R,P=H,M=L,V=K;return i(),o("div",W,[a(M,null,{default:c(()=>[a(b,{span:12,xs:24,class:"card-box"},{default:c(()=>[a(m,null,{header:c(()=>[a(C,{style:{width:"1em",height:"1em","vertical-align":"middle"}}),e[0]||(e[0]=f()),e[1]||(e[1]=l("span",{style:{"vertical-align":"middle"}},"CPU",-1))]),default:c(()=>[l("div",X,[l("table",Y,[e[6]||(e[6]=l("thead",null,[l("tr",null,[l("th",{class:"el-table__cell is-leaf",width:"120"},[l("div",{class:"cell"},"属性")]),l("th",{class:"el-table__cell is-leaf"},[l("div",{class:"cell"},"值")])])],-1)),l("tbody",null,[l("tr",null,[e[2]||(e[2]=l("td",{class:"el-table__cell is-leaf"},[l("div",{class:"cell"},"核心数")],-1)),l("td",Z,[t(s).cpu?(i(),o("div",ll,d(r(t(s).cpu.cpuNum)),1)):n("",!0)])]),l("tr",null,[e[3]||(e[3]=l("td",{class:"el-table__cell is-leaf"},[l("div",{class:"cell"},"用户使用率")],-1)),l("td",el,[t(s).cpu?(i(),o("div",sl,[a(p,{"text-inside":!0,"stroke-width":20,percentage:r(t(s).cpu.used)},null,8,["percentage"])])):n("",!0)])]),l("tr",null,[e[4]||(e[4]=l("td",{class:"el-table__cell is-leaf"},[l("div",{class:"cell"},"系统使用率")],-1)),l("td",tl,[t(s).cpu?(i(),o("div",al,[a(p,{"text-inside":!0,"stroke-width":20,percentage:r(t(s).cpu.sys)},null,8,["percentage"])])):n("",!0)])]),l("tr",null,[e[5]||(e[5]=l("td",{class:"el-table__cell is-leaf"},[l("div",{class:"cell"},"当前空闲率")],-1)),l("td",il,[t(s).cpu?(i(),o("div",ol,[a(p,{"text-inside":!0,"stroke-width":20,status:"success",percentage:r(t(s).cpu.free)},null,8,["percentage"])])):n("",!0)])])])])])]),_:1})]),_:1}),a(b,{span:12,xs:24,class:"card-box"},{default:c(()=>[a(m,null,{header:c(()=>[a(T,{style:{width:"1em",height:"1em","vertical-align":"middle"}}),e[7]||(e[7]=f()),e[8]||(e[8]=l("span",{style:{"vertical-align":"middle"}},"内存",-1))]),default:c(()=>[l("div",dl,[l("table",cl,[e[13]||(e[13]=l("thead",null,[l("tr",null,[l("th",{class:"el-table__cell is-leaf",width:"120"},[l("div",{class:"cell"},"属性")]),l("th",{class:"el-table__cell is-leaf"},[l("div",{class:"cell"},"内存")])])],-1)),l("tbody",null,[l("tr",null,[e[9]||(e[9]=l("td",{class:"el-table__cell is-leaf"},[l("div",{class:"cell"},"总内存")],-1)),l("td",nl,[t(s).mem?(i(),o("div",_l,d(r(t(s).mem.total))+"G",1)):n("",!0)])]),l("tr",null,[e[10]||(e[10]=l("td",{class:"el-table__cell is-leaf"},[l("div",{class:"cell"},"已用内存")],-1)),l("td",rl,[t(s).mem?(i(),o("div",ul,d(r(t(s).mem.used))+"G",1)):n("",!0)])]),l("tr",null,[e[11]||(e[11]=l("td",{class:"el-table__cell is-leaf"},[l("div",{class:"cell"},"剩余内存")],-1)),l("td",ml,[t(s).mem?(i(),o("div",bl,d(r(t(s).mem.free))+"G",1)):n("",!0)])]),l("tr",null,[e[12]||(e[12]=l("td",{class:"el-table__cell is-leaf"},[l("div",{class:"cell"},"使用率")],-1)),l("td",fl,[t(s).mem?(i(),o("div",pl,[a(p,{"text-inside":!0,"stroke-width":20,status:t(s).mem.usage<50?"success":t(s).mem.usage<80?"warning":"exception",percentage:r(t(s).mem.usage)},null,8,["status","percentage"])])):n("",!0)])])])])])]),_:1})]),_:1}),a(b,{span:24,class:"card-box"},{default:c(()=>[a(m,null,{header:c(()=>[a(I,{style:{width:"1em",height:"1em","vertical-align":"middle"}}),e[14]||(e[14]=f()),e[15]||(e[15]=l("span",{style:{"vertical-align":"middle"}},"服务器信息",-1))]),default:c(()=>[l("div",vl,[l("table",yl,[l("tbody",null,[l("tr",null,[e[16]||(e[16]=l("td",{class:"el-table__cell is-leaf"},[l("div",{class:"cell"},"服务器名称")],-1)),l("td",hl,[t(s).sys?(i(),o("div",gl,d(t(s).sys.computerName),1)):n("",!0)]),e[17]||(e[17]=l("td",{class:"el-table__cell is-leaf"},[l("div",{class:"cell"},"操作系统")],-1)),l("td",wl,[t(s).sys?(i(),o("div",kl,d(t(s).sys.osName),1)):n("",!0)])]),l("tr",null,[e[18]||(e[18]=l("td",{class:"el-table__cell is-leaf"},[l("div",{class:"cell"},"服务器IP")],-1)),l("td",xl,[t(s).sys?(i(),o("div",Nl,d(t(s).sys.computerIp),1)):n("",!0)]),e[19]||(e[19]=l("td",{class:"el-table__cell is-leaf"},[l("div",{class:"cell"},"系统架构")],-1)),l("td",Cl,[t(s).sys?(i(),o("div",Tl,d(t(s).sys.osArch),1)):n("",!0)])]),l("tr",null,[e[20]||(e[20]=l("td",{class:"el-table__cell is-leaf"},[l("div",{class:"cell"},"系统温度")],-1)),l("td",Il,[t(s).sys?(i(),o("div",El,d(t(s).sys.temp||"--")+" ℃",1)):n("",!0)])])])])])]),_:1})]),_:1}),a(b,{span:24,class:"card-box"},{default:c(()=>[a(m,null,{header:c(()=>[a(E,{style:{width:"1em",height:"1em","vertical-align":"middle"}}),e[21]||(e[21]=f()),e[22]||(e[22]=l("span",{style:{"vertical-align":"middle"}},"环境信息",-1))]),default:c(()=>[l("div",Pl,[l("table",Ml,[l("tbody",null,[l("tr",null,[e[23]||(e[23]=l("td",{class:"el-table__cell is-leaf"},[l("div",{class:"cell"},"开机时间")],-1)),l("td",Vl,[t(s).sys?(i(),o("div",jl,d(t(s).sys.startTime),1)):n("",!0)]),e[24]||(e[24]=l("td",{class:"el-table__cell is-leaf"},[l("div",{class:"cell"},"运行时长")],-1)),l("td",Bl,[t(s).sys?(i(),o("div",Jl,d(t(s).sys.uptime),1)):n("",!0)])]),l("tr",null,[e[25]||(e[25]=l("td",{class:"el-table__cell is-leaf"},[l("div",{class:"cell"},"Java版本")],-1)),l("td",zl,[t(s).sys?(i(),o("div",Dl,d(t(s).sys.javaVersion),1)):n("",!0)]),e[26]||(e[26]=l("td",{class:"el-table__cell is-leaf"},[l("div",{class:"cell"},"Java路径")],-1)),l("td",Fl,[t(s).sys?(i(),o("div",Gl,d(t(s).sys.javaPath),1)):n("",!0)])]),l("tr",null,[e[27]||(e[27]=l("td",{class:"el-table__cell is-leaf"},[l("div",{class:"cell"},"NodeJs版本")],-1)),l("td",Ll,[t(s).sys?(i(),o("div",Al,d(t(s).sys.nodeVersion),1)):n("",!0)]),e[28]||(e[28]=l("td",{class:"el-table__cell is-leaf"},[l("div",{class:"cell"},"NodeJs路径")],-1)),l("td",Sl,[t(s).sys?(i(),o("div",Ul,d(t(s).sys.nodePath),1)):n("",!0)])])])])])]),_:1})]),_:1}),a(b,{span:24,class:"card-box"},{default:c(()=>[a(m,null,{header:c(()=>[a(N,{style:{width:"1em",height:"1em","vertical-align":"middle"}}),e[29]||(e[29]=f()),e[30]||(e[30]=l("span",{style:{"vertical-align":"middle"}},"磁盘状态",-1))]),default:c(()=>[l("div",$l,[l("table",ql,[e[31]||(e[31]=l("thead",null,[l("tr",null,[l("th",{class:"el-table__cell el-table__cell is-leaf"},[l("div",{class:"cell"},"盘符路径")]),l("th",{class:"el-table__cell is-leaf"},[l("div",{class:"cell"},"文件系统")]),l("th",{class:"el-table__cell is-leaf"},[l("div",{class:"cell"},"盘符类型")]),l("th",{class:"el-table__cell is-leaf"},[l("div",{class:"cell"},"总大小")]),l("th",{class:"el-table__cell is-leaf"},[l("div",{class:"cell"},"可用大小")]),l("th",{class:"el-table__cell is-leaf"},[l("div",{class:"cell"},"已用大小")]),l("th",{class:"el-table__cell is-leaf"},[l("div",{class:"cell"},"已用百分比")])])],-1)),t(s).sysFiles?(i(),o("tbody",Rl,[(i(!0),o(A,null,S(t(s).sysFiles,(u,j)=>(i(),o("tr",{key:j},[l("td",Hl,[l("div",Kl,d(u.dirName),1)]),l("td",Ol,[l("div",Ql,d(u.sysTypeName),1)]),l("td",Wl,[l("div",Xl,d(u.typeName),1)]),l("td",Yl,[l("div",Zl,d(u.total),1)]),l("td",le,[l("div",ee,d(u.free),1)]),l("td",se,[l("div",te,d(u.used),1)]),l("td",ae,[l("div",ie,[a(p,{"text-inside":!0,"stroke-width":20,percentage:r(u.usage)},null,8,["percentage"])])])]))),128))])):n("",!0)])])]),_:1})]),_:1}),a(b,{span:24,class:"card-box"},{default:c(()=>[a(m,null,{header:c(()=>[a(N,{style:{width:"1em",height:"1em","vertical-align":"middle"}}),e[32]||(e[32]=f()),e[33]||(e[33]=l("span",{style:{"vertical-align":"middle"}},"内存状态",-1))]),default:c(()=>[a(P,{data:t(s).top||[],style:{width:"100%"}},{default:c(()=>[a(v,{label:"序号",type:"index",width:"80"}),a(v,{label:"内存占用大小",prop:"memFormat",width:"140"}),a(v,{label:"PID",prop:"pid",width:"140"}),a(v,{label:"程序路径",prop:"path"}),a(v,{label:"程序详情",prop:"cmd","show-overflow-tooltip":""})]),_:1},8,["data"])]),_:1})]),_:1})]),_:1}),e[34]||(e[34]=l("div",{style:{"text-align":"center","font-size":"13px",color:"#999"}},[l("a",{href:"https://github.com/dhjz/dmonitor",target:"_blank"},"@dhjz/dmonitor")],-1)),a(V)])}}};export{ne as default};
